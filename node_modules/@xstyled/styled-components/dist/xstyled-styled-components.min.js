!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("styled-components"),require("react"),require("@xstyled/system")):"function"==typeof define&&define.amd?define(["exports","styled-components","react","@xstyled/system"],t):t((e=e||self).xstyled={},e.styled,e.React,e.xstyledSystem)}(this,(function(e,t,r,n){"use strict";var o="default"in t?t.default:t;r=r&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r;var u=function(e){return"string"==typeof e&&""!==e},i=function(e){return"object"==typeof e&&null!==e},c=function(e){return"function"==typeof e};function l(e){return e.reduce((function(e,t){var r=e.length-1,n=e[r];return"string"==typeof n&&"string"==typeof t?e[r]=n+t:e.push(t),e}),[])}function a(e,t){if(null==e)return{};var r,n,o={},u=Object.keys(e);for(n=0;n<u.length;n++)r=u[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function f(e){return n.getBreakpoints({theme:e})}function s(){var e=r.useState("undefined"==typeof window?null:window.innerWidth),t=e[0],n=e[1];return r.useEffect((function(){function e(){n(window.innerWidth)}return window.addEventListener("resize",e),n(window.innerWidth),function(){return window.removeEventListener("resize",e)}}),[]),t}function m(e,t){var r=function(e,t){var r=f(e)[t];return 0===r?null:r}(e,t);return s()>=r}function g(e,t){var r=function(e,t){var r=f(e)[t];return 0===r?null:r-.02}(e,t);return s()<r}function h(){return["&&{",n.system,"}"]}h.meta=n.system.meta;var y=function(e){return function(t){var r=Number(t);return e(Number.isNaN(r)?t:r)}},v=/\s+/,p=function(e){return function(t){var r=t.split(v);return function(t){return r.map((function(r){return e(r)(t)})).join(" ")}}},b=/\s*,\s*/,w=function(e){return function(t){var r=t.split(b);return function(t){return r.map((function(r){return e(r)(t)})).join(",")}}},S=y(n.getPx),C=y(n.getSpace),x=p(C),P=y(n.getBorder),M=y(n.getBorderWidth),j=p(M),O=y(n.getSize),T=p(n.getBorderStyle),E={margin:x,"margin-top":C,"margin-bottom":C,"margin-left":C,"margin-right":C,padding:x,"padding-top":C,"padding-bottom":C,"padding-left":C,"padding-right":C,"grid-gap":x,"grid-row-gap":C,"grid-column-gap":C,color:n.getColor,"background-color":n.getColor,"border-color":n.getColor,"border-top-color":n.getColor,"border-right-color":n.getColor,"border-bottom-color":n.getColor,"border-left-color":n.getColor,"outline-color":n.getColor,fill:n.getColor,"border-radius":p(y(n.getRadius)),"border-top-left-radius":p(y(n.getRadius)),"border-top-right-radius":p(y(n.getRadius)),"border-bottom-right-radius":p(y(n.getRadius)),"border-bottom-left-radius":p(y(n.getRadius)),border:P,"border-top":P,"border-right":P,"border-bottom":P,"border-left":P,"border-width":j,"border-top-width":M,"border-right-width":M,"border-bottom-width":M,"border-left-width":M,"outline-width":M,"border-style":T,"border-top-style":n.getBorderStyle,"border-right-style":n.getBorderStyle,"border-bottom-style":n.getBorderStyle,"border-left-style":n.getBorderStyle,"outline-style":n.getBorderStyle,"box-shadow":w(n.getShadow),"text-shadow":w(n.getShadow),width:O,height:O,"max-width":O,"max-height":O,"min-width":O,"min-height":O,"z-index":y(n.getZIndex),"font-family":n.getFont,"font-size":y(n.getFontSize),"line-height":y(n.getLineHeight),"font-weight":n.getFontWeight,"letter-spacing":y(n.getLetterSpacing),transition:n.getTransition,top:S,right:S,bottom:S,left:S},B=/(\s*)([^&{}:;\n]+):\s*([^&{}:;\n]+)(\s*);/g,k=/\s*!important\s*/;function L(e){if("string"!=typeof e)return e;for(var t,r=0,n=[],o=function(){var o=t,u=o[1],i=o[2],c=o[3],l=o[4],a=E[i];if(a){var d=k.test(c),f=c.replace(k,"");n.push(e.slice(r,t.index)),n.push((function(e){return""+u+i+": "+a(f)(e)+(d?" !important":"")+";"+l})),r=t.index+t[0].length}};t=B.exec(e);)o();return n.push(e.slice(r,e.length)),n}var _=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.filter(Boolean).join(".")},I=function(e){return"--"+e.replace(/\./g,"-")},q=function(e,t){return"var("+I(e)+", "+t+")"};function R(e,t,r){void 0===r&&(r=e);var n=Array.isArray(e)?[]:{};for(var o in e){var l=e[o],a=_(t,o);i(l)?n[o]=R(l,a,r):u(l)?n[o]=q(a,l):c(l)&&(n[o]=q(a,l({theme:r})))}return n}function z(e,t,r,n){for(var o in void 0===r&&(r=e),void 0===n&&(n={value:""}),e){var l=e[o],a=_(t,o);i(l)?z(l,a,r,n):u(l)?n.value+=I(a)+": "+l+";":c(l)&&(n.value+=I(a)+": "+l({theme:r})+";")}return n.value}var N="xstyled-color-mode",W="undefined"!=typeof window&&function(){try{return window.localStorage.setItem("xstyled-color-mode-test","xstyled-color-mode-test"),window.localStorage.removeItem("xstyled-color-mode-test"),!0}catch(e){return!1}}()?{get:function(){return window.localStorage.getItem(N)},set:function(e){return window.localStorage.setItem(N,e)},clear:function(){return window.localStorage.removeItem(N)}}:{get:function(){return null},set:function(){},clear:function(){}},F=function(e){return"xstyled-color-mode-"+e},A=["light","dark"];var G=function(e){return"(prefers-color-scheme: "+e+")"};function Q(e){return e&&e.colors&&e.colors.modes}function H(e){return e&&(void 0===e.useCustomProperties||e.useCustomProperties)}function D(e){return e.initialColorModeName||"default"}function U(e,t){var r=(void 0===t?{}:t).targetSelector,n=void 0===r?"body":r;if(!Q(e))return null;var o=e.colors,u=o.modes,i=z(a(o,["modes"]),"xstyled-colors",e);function c(t){var r=function(e,t){return d({},e,{colors:d({},e.colors,e.colors.modes[t])})}(e,t),n=r.colors,o=n.modes;return z(d({},a(n,["modes"]),o[t]),"xstyled-colors",r)}return!1!==e.useColorSchemeMediaQuery&&A.forEach((function(e){if(u[e]){var t="@media "+G(e);i+=t+"{"+c(e)+"}"}})),[D(e)].concat(Object.keys(u)).forEach((function(e){var t="&."+F(e);i+=t+"{"+c(e)+"}"})),n+"{"+i+"}"}function V(e){var t=r.useMemo((function(){return function(e){return e&&(void 0===e.useColorSchemeMediaQuery||e.useColorSchemeMediaQuery)}(e)?A.map((function(t){if(!e.colors.modes[t])return null;var r=function(e){if("undefined"==typeof window||void 0===window.matchMedia)return null;var t=G(e);return window.matchMedia(t)}(t);return r?{mode:t,mql:r}:null})).filter(Boolean):[]}),[e]),n=r.useState((function(){var e=t.find((function(e){return e.mql.matches}));return e?e.mode:null})),o=n[0],u=n[1];return r.useEffect((function(){var e=t.filter((function(e){var t=e.mql;return t.addListener&&t.removeListener})).map((function(e){var t=e.mode,r=e.mql,n=function(e){var r=e.matches;u(r?t:function(e){return e===t?null:t})};return r.addListener(n),function(){return r.removeListener(n)}}));return function(){return e.forEach((function(e){return e()}))}})),o}var Z="undefined"!=typeof window?r.useLayoutEffect:r.useEffect;function J(e,t){var n=(void 0===t?{}:t).target,o=V(e),u=function(e){return e.defaultColorModeName||D(e)}(e),i=D(e),c=r.useState((function(){return Q(e)?u:null})),l=c[0],a=c[1],d=H(e),f=r.useRef(!1),s=r.useCallback((function(e){f.current=!0,a(e)}),[]);return Z((function(){if(Q(e)){var t=W.get();l!==(t||o||u)&&a(t||o||u)}}),[]),Z((function(){f.current&&W.set(l)}),[l]),Z((function(){if(!W.get()){var e=o||u;e!==l&&a(e)}}),[l,o,u]),Z((function(){if(d&&(W.get()||i!==l)){var e=F(l),t=n||document.body;return t.classList.add(e),function(){t.classList.remove(e)}}}),[d,n,l,i]),[l,s]}var K=r.createContext();function X(e){var t=e.ThemeContext,n=e.ThemeProvider,o=e.ColorModeStyle;return function(e){var u=e.children,i=e.target,c=e.targetSelector,l=r.useContext(t);if(!l)throw new Error("[ColorModeProvider] requires ThemeProvider upper in the tree");var f=J(l,{target:i}),s=function(e,t){var n=r.useMemo((function(){if(!H(e))return null;if(!Q(e))return e;var t=e.colors,r=t.modes,n=a(t,["modes"]);return d({},e,{colors:d({},R(n,"xstyled-colors",e),{modes:r}),__rawColors:e.colors})}),[e]),o=r.useMemo((function(){return H(e)?null:Q(e)?t===D(e)?d({},e,{__colorMode:t}):d({},e,{colors:d({},e.colors,e.colors.modes[t]),__colorMode:t,__rawColors:e.colors}):e}),[e,t]);return n||o}(l,f[0]);return r.createElement(r.Fragment,null,r.createElement(o,{targetSelector:c}),r.createElement(n,{theme:s},r.createElement(K.Provider,{value:f},u)))}}function Y(e){var t=(void 0===e?{}:e).target;return"(function() { try {\n    var mode = localStorage.getItem('"+N+"');\n    if (mode) "+(void 0===t?"document.body":t)+".classList.add('xstyled-color-mode-' + mode);\n  } catch (e) {} })();"}function $(){var e=t.css.apply(void 0,arguments),r=l(e);return r.map(L)}function ee(e,t){return t||(t=e.slice(0)),e.raw=t,e}function te(){var e=ee(["",""]);return te=function(){return e},e}function re(e){return function e(t){var r=function(){return t(te(),$.apply(void 0,arguments))};return r.attrs=function(r){return e(t.attrs(r))},r.withConfig=function(r){return e(t.withConfig(r))},r}(o(e))}var ne=re(n.createSystemComponent(r))(h);function oe(){var e=ee(["",""]);return oe=function(){return e},e}re.box=re(ne),Object.keys(o).forEach((function(e){re[e]=re(e),re[e+"Box"]=re(ne.withComponent(n.createSystemComponent(r,e)))}));var ue=t.createGlobalStyle(oe(),(function(e){return U(e.theme,{targetSelector:e.targetSelector})})),ie=X({ThemeContext:t.ThemeContext,ThemeProvider:t.ThemeProvider,ColorModeStyle:ue});function ce(){return r.useContext(t.ThemeContext)}Object.keys(n).forEach((function(t){"default"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})})),Object.defineProperty(e,"ServerStyleSheet",{enumerable:!0,get:function(){return t.ServerStyleSheet}}),Object.defineProperty(e,"StyleSheetConsumer",{enumerable:!0,get:function(){return t.StyleSheetConsumer}}),Object.defineProperty(e,"StyleSheetContext",{enumerable:!0,get:function(){return t.StyleSheetContext}}),Object.defineProperty(e,"StyleSheetManager",{enumerable:!0,get:function(){return t.StyleSheetManager}}),Object.defineProperty(e,"ThemeConsumer",{enumerable:!0,get:function(){return t.ThemeConsumer}}),Object.defineProperty(e,"ThemeContext",{enumerable:!0,get:function(){return t.ThemeContext}}),Object.defineProperty(e,"ThemeProvider",{enumerable:!0,get:function(){return t.ThemeProvider}}),Object.defineProperty(e,"isStyledComponent",{enumerable:!0,get:function(){return t.isStyledComponent}}),Object.defineProperty(e,"keyframes",{enumerable:!0,get:function(){return t.keyframes}}),Object.defineProperty(e,"withTheme",{enumerable:!0,get:function(){return t.withTheme}}),e.Box=ne,e.ColorModeProvider=ie,e.createGlobalStyle=function(){return t.createGlobalStyle([$.apply(void 0,arguments)])},e.css=$,e.default=re,e.getColorModeInitScriptElement=function(e){return r.createElement("script",{key:"xstyled-color-mode-init",dangerouslySetInnerHTML:{__html:Y(e)}})},e.getColorModeInitScriptTag=function(e){return"<script>"+Y(e)+"<\/script>"},e.useBreakpoint=function(){return e=ce(),t=f(e),n=s(),r.useMemo((function(){return Object.keys(t).reverse().find((function(e){return n>t[e]}))||null}),[t,n]);var e,t,n},e.useBreakpoints=function(){return f(ce())},e.useColorMode=function(){var e=r.useContext(K);if(!e)throw new Error("[useColorMode] requires the ColorModeProvider component");return e},e.useDown=function(e){return g(ce(),e)},e.useTheme=ce,e.useUp=function(e){return m(ce(),e)},e.useViewportWidth=s,Object.defineProperty(e,"__esModule",{value:!0})}));
